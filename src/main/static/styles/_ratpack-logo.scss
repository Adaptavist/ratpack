$logo-font-size: 8rem;
$small-logo-font-size: 5rem;
$tiny-logo-font-size: 3rem;

$logo-image: image-url('ratpack-logo.png');
$logo-inverted: image-url('ratpack-logo-white.png');

@mixin skewed-background-scale($base-size) {
  &:before {
    top: $base-size * 0.25;
    height: $base-size * 0.8125;
    left: $base-size * 0.375;
    width: $base-size * 3.125;
  }
}

@mixin skewed-background-color($background-color) {
  &:before {
    background-color: $background-color;
  }
}

@mixin skewed-background($base-size, $background-color) {
  position: relative;
  z-index: 0;
  @include skewed-background-scale($base-size);
  @include skewed-background-color($background-color);
  &:before {
    content: " ";
    position: absolute;
    z-index: -1;
    @include rotate(-4deg);
    @include antialias;
    @include noise-background;
  }
}

@mixin ratpack-logo {
  display: inline-block;
  vertical-align: top;
  margin: 1em;

  @include skewed-background($logo-font-size, transparentize($yellow, 0.1));

  h1, p {
    line-height: 1;
    margin: 0 0;
  }

  h1 {
    display: inline-block;
    padding: 0 0.75em 0 1em;
    color: $black;
    font: {
      family: 'Engagement', sans-serif;
      weight: normal;
      size: $logo-font-size;
    }
    text-transform: none;
    background: {
      image: $logo-image;
      repeat: no-repeat;
      position: {
        y: bottom;
        x: left;
      }
      size: contain;
    }

    &:last-child {
      border-bottom: 0.03em solid $black;
    }
  }

  p {
    @include contrasted($black);
    font: {
      family: $mono-font-family;
      size: $logo-font-size * 0.18;
    }
    @include text-shadow(0 1px 0 darken($black, 15), 0 -1px 0 darken(contrast-color($black), 40));
    padding: 0.2em 0.4em;
  }

  &.small {
    @include skewed-background-scale($small-logo-font-size);
    h1 {
      font-size: $small-logo-font-size;
    }
  }

  &.tiny {
    @include skewed-background-scale($tiny-logo-font-size);
    h1 {
      font-size: $tiny-logo-font-size;
    }
  }

  &.inverted {
    @include skewed-background-color(mix($yellow, $black, 40%));
    &.blue {
      @include skewed-background-color(mix($blue, $black, 60%));
    }
    &.red {
      @include skewed-background-color(mix($red, $black, 40%));
    }
    h1 {
      color: $white;
      background-image: $logo-inverted;
      border-bottom-color: $white;
    }
    p {
      @include contrasted($white);
    }
  }

  &.red {
    @include skewed-background-color(transparentize($red, 0.2));
  }

  &.blue {
    @include skewed-background-color(transparentize($blue, 0.1));
  }

  &.plain {
    @include skewed-background-color(transparent);
  }
}

