@mixin pseudo-background {
  position: relative;
  &:before {
    content: " ";
    display: block;
    position: absolute;
    left: 0;
    bottom: 0;
    width: 100%;
    height: 120%;

    @content;
  }
}

html {
  background-color: $ivory;
}

section {
  padding: 1.2em 0;
}

.masthead {
  color: contrast-color($black);
  @include pseudo-background {
    background: {
      color: $black;
    }

    z-index: -1;

    @include transform-origin($origin-x: left);
    @include skewY(1deg);
    @include backface-visibility(hidden);
  }

  .logo {
    @include ratpack-logo-inverted;
    float: left;
    margin-top: 4.5em;
    margin-bottom: 4.5em;
  }
}

.promo {
  color: contrast-color($blue);
  @include pseudo-background {
    background: {
      color: $blue;
    }

    bottom: 0;
    height: 150%;
    z-index: -2;

    @include transform-origin($origin-x: right);
    @include skewY(-0.5deg);
    @include backface-visibility(hidden);
  }

  .primary {
    @include column(8);
  }

  aside {
    @include column(4);
  }

  nav {
    margin-bottom: 0.5em;
    a {
      $bg-color: darken($red, 25%);
      display: block;
      @include contrasted(transparentize($bg-color, 0.4));
      padding: 0.5em;
      margin-bottom: 0.5em;

      &:active, &:hover {
        @include contrasted($bg-color);
      }
    }
  }
}

.main {
  .body {
    @include column(10);
    @include push(1);
    @include pull(1);
  }
}

.callout {
  margin-bottom: 1.2em;
  padding: 0 1.2em;
  @include contrasted(darken($blue, 45%));
  @include box-shadow(2px 3px 0 6px transparentize(white, 0.5), -3px -2px 0 5px transparentize(white, 0.5));
}

.site-footer {
  @include contrasted($black);

  .content {
    $bg-image: 'ratpack-footer.png';
    min-height: image-height($bg-image);
    background: {
      image: image-url($bg-image);
      repeat: no-repeat;
      position: top left;
    }
  }

  .about {
    @include column(7);
    @include push(4);
    @include pull(1);
  }
}