.main {
	@include rhythm($leader: 1, $trailer: 1);
	@include content-width;
}

.promo {
	$promo-font-size: 18px;

	@include contrasted-smooth($black);
	@include noise-background;
	@include adjust-font-size-to($promo-font-size);
	@include rhythm($padding-leader: 1, $padding-trailer: 1, $font-size: $promo-font-size);
	@include big-section-border($font-size: $promo-font-size);

	p {
		@include rhythm($leader: 1, $trailer: 1, $font-size: $promo-font-size);
	}

	a {
		@include link-colors($blue, $yellow);
	}

	h2 {
		@include adjust-font-size-to($to-size: $h2-font-size, $from-size: $promo-font-size);
		&:first-of-type {
			margin-top: 0;
		}
	}

	article, nav {
		@include full-width;
	}

	nav ul {
		@include adjust-font-size-to($to-size: 24px, $from-size: $promo-font-size);
		@include rhythm($leader: 1, $trailer: 1, $font-size: 24px);
		@include starburst-links;
		li {
			@include margin-trailer(0.5, 24px);
		}
	}

	@include at-least($tablet-portrait) {
		@include clearfix;
		article {
			@include columns(6);
			@include push(1);
			float: left;
		}

		nav {
			@include columns(4);
			@include pull(1);
			float: left;
		}

		position: relative;
		z-index: 0;
		@include rhythm($padding-leader: 2, $padding-trailer: 2, $font-size: $promo-font-size);
		&:before, &:after {
			content: " ";
			position: absolute;
			top: 5%;
			left: 5%;
			width: 90%;
			height: 90%;
			z-index: -1;
			@include backface-visibility(hidden);
			border: {
				width: 2px;
				style: solid;
				color: transparentize($white, 0.5);
			}
		}
		&:before {
			@include transform(skew(2deg) rotate(-0.5deg));
		}
		&:after {
			@include transform(skewY(0.5deg));
		}
	}
}

.page-footer {
	.social {
		$button-size: 48px;
		$icon-font-size: 32px;

		@include adjust-font-size-to(18px);
		@include rhythm($leader: 1, $trailer: 1, $font-size: 18px);

		> * {
			display: inline-block;
			vertical-align: middle;
		}

		em {
			font: {
				family: $script-font-family;
				size: 32px;
				style: normal;
			}
		}

		a {
			background-color: $white;
			@include link-colors($black, $black);
			&:hover, &:focus {
				background-color: $yellow;
				box-shadow: 0 0 5px $yellow;
			}
			border-radius: 50%;
			text-align: center;
			line-height: $button-size;
			width: $button-size;
			height: $button-size;
			margin: {
				left: 0.25em;
				right: 0.25em;
			}
			[class^='icon-'] {
				font-size: $icon-font-size;
				&:before {
					width: 100%;
					height: 100%;
					line-height: $button-size;
					margin: {
						left: 0;
						right: 0;
					}
				}
			}
		}
	}

	a.build-status {
		border-bottom: none;
	}

	.credits {
		text-align: center;
		@include margin-leader(1, $footer-font-size);
		a {
			border-bottom: none;
			@include rem(margin-right, 1rem);
			img {
				filter: url("data:image/svg+xml;utf8,<svg xmlns=\'http://www.w3.org/2000/svg\'><filter id=\'grayscale\'><feColorMatrix type=\'matrix\' values=\'0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0\'/></filter></svg>#grayscale"); /* Firefox 10+ */
				filter: gray; /* IE6-9 */
				-webkit-filter: grayscale(100%); /* Chrome 19+ & Safari 6+ */
				-webkit-transition: all 0.6s ease; /* Fade to color for Chrome and Safari */
				-webkit-backface-visibility: hidden; /* Fix for transition flickering */
			}
			&:hover, &:focus {
				img {
					filter: url("data:image/svg+xml;utf8,<svg xmlns=\'http://www.w3.org/2000/svg\'><filter id=\'grayscale\'><feColorMatrix type=\'matrix\' values=\'1 0 0 0 0, 0 1 0 0 0, 0 0 1 0 0, 0 0 0 1 0\'/></filter></svg>#grayscale");
					-webkit-filter: grayscale(0%);
				}
			}
		}
	}

	@include at-least($tablet-portrait) {
		.multiplebgs & {
			$footer-image-url: 'ratpack-footer.png';

			.social, .about {
				margin-left: image-width($footer-image-url);
			}

			min-height: image-height($footer-image-url) + (2 * image-height('bintray.png'));
			background:
				image-url($mask-image-url) top left repeat,
				$black image-url($footer-image-url) top left no-repeat;

			padding-bottom: 2 * image-height('bintray.png');
			position: relative;
			.credits {
				position: absolute;
				left: 0;
				bottom: rhythm(1, $footer-font-size);
				width: 100%;
			}
		}
	}
}
