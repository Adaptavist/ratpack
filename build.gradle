apply plugin: 'jetty'
apply plugin: 'idea'
apply plugin: 'eclipse'
apply plugin: 'ratpack'

buildscript {
  repositories {
    mavenCentral()
    mavenLocal()
  }
  dependencies {
    classpath 'com.augusttechgroup:ratpack-plugin:0.5-SNAPSHOT'
  }
}

repositories {
  mavenCentral()
}

configurations { 
  provided
}

dependencies {
  groovy 'org.codehaus.groovy:groovy:1.8.6'
}

jettyRunWar {
  contextPath = '/'
  httpPort = 5000
}

jettyRun {
	jettyRun.scanTargets = [file(sourceSets.app.groovy)]
	webAppSourceDirectory = file("src/app/webapp")
	classpath += sourceSets.app.groovy + sourceSets.app.resources
	webXml = file("src/main/webapp/WEB-INF/web.xml")
  contextPath = '/'
  httpPort = 5000
}

task wrapper(type: Wrapper) {
  gradleVersion = '1.0-milestone-8a'
}

task run(type: JavaExec) {
  main = 'com.bleedingwolf.ratpack.RatpackRunner'
  args = [ 'src/app/groovy/app.groovy' ]
  classpath(runtimeClasspath + configurations.provided)
}
